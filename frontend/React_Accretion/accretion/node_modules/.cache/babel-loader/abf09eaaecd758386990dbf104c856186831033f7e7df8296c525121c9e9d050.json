{"ast":null,"code":"import{useState}from'react';import Config from'../Config';import'./user-auth.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){const[userData,setUserData]=useState({\"username\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"email\":\"\",\"password\":\"\",\"re_password\":\"\"});const cleanUserData=()=>{setUserData({\"username\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"email\":\"\",\"password\":\"\",\"re_password\":\"\"});};const[signupError,setSignupError]=useState({});const changeHandler=event=>{setUserData({...userData,[event.target.name]:event.target.value});};const submitHandler=async event=>{event.preventDefault();fetch(Config.API_URL+\"auth/users/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)}).then(response=>{if(!response.ok){return response.json().then(data=>{throw new Error(JSON.stringify(data));});}else{alert(\"Signup successful! Please sign in.\");cleanUserData();}return response.json();}).then(data=>{console.log(data);}).catch(error=>{setSignupError(JSON.parse(error.message));if(signupError.username){alert(\"username: \"+signupError.username);}console.log(signupError);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{children:['non_field_errors'in signupError&&/*#__PURE__*/_jsx(\"p\",{id:\"error-message\",children:signupError.non_field_errors}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",onChange:changeHandler,value:userData.username}),'username'in signupError&&/*#__PURE__*/_jsx(\"p\",{id:\"error-message\",children:signupError.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",onChange:changeHandler,value:userData.first_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"last_name\",onChange:changeHandler,value:userData.last_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",onChange:changeHandler,value:userData.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:changeHandler,value:userData.password}),'password'in signupError&&/*#__PURE__*/_jsx(\"p\",{id:\"error-message\",children:signupError.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"re_password\",onChange:changeHandler,value:userData.re_password}),'re_password'in signupError&&/*#__PURE__*/_jsx(\"p\",{id:\"error-message\",children:signupError.re_password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign up\"})]})});}","map":{"version":3,"names":["useState","Config","jsx","_jsx","jsxs","_jsxs","Signup","userData","setUserData","cleanUserData","signupError","setSignupError","changeHandler","event","target","name","value","submitHandler","preventDefault","fetch","API_URL","method","headers","body","JSON","stringify","then","response","ok","json","data","Error","alert","console","log","catch","error","parse","message","username","children","onSubmit","id","non_field_errors","type","onChange","first_name","last_name","email","password","re_password"],"sources":["/Users/yxni-mbp/Dropbox (Personal)/Startup/Accretion/Website/frontend/React_Accretion/accretion/src/user-auth/Signup.js"],"sourcesContent":["import { useState } from 'react';\n\nimport Config from '../Config';\nimport './user-auth.css';\n\nexport default function Signup () {\n    const [userData, setUserData] = useState({\n        \"username\": \"\",\n        \"first_name\": \"\",\n        \"last_name\": \"\",\n        \"email\": \"\",\n        \"password\": \"\",\n        \"re_password\": \"\"\n    });\n\n    const cleanUserData = () => {\n        setUserData({\n            \"username\": \"\",\n            \"first_name\": \"\",\n            \"last_name\": \"\",\n            \"email\": \"\",\n            \"password\": \"\",\n            \"re_password\": \"\"\n        });\n    }\n\n    const [signupError, setSignupError] = useState({});\n    \n    const changeHandler = (event) => {\n        setUserData({\n            ...userData, \n            [event.target.name]: event.target.value\n        });\n    }\n\n    const submitHandler = async (event) => {\n        event.preventDefault();\n        \n        fetch(\n            Config.API_URL + \"auth/users/\", \n            {\n                method: 'POST', \n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(userData)\n            })\n        .then(response => {\n            if (!response.ok) {\n                return response.json()\n                .then(data => {throw new Error(JSON.stringify(data))})\n            } else {\n                alert(\"Signup successful! Please sign in.\");\n                cleanUserData();\n            }\n            return response.json();\n        })\n        .then(data => {\n            console.log(data);\n        })\n        .catch(error => {\n            setSignupError(JSON.parse(error.message));\n            if (signupError.username) {\n                alert(\"username: \" + signupError.username);\n            }\n            console.log(signupError);\n        })\n    }\n    \n    return (\n        <div>\n            <form onSubmit={submitHandler}> \n                <div>\n                    {('non_field_errors' in signupError) && <p id=\"error-message\">{signupError.non_field_errors}</p>}\n                    <label>Username</label>  \n                    <input type=\"text\" name=\"username\" onChange={changeHandler} value={userData.username} />  \n                    {('username' in signupError) && <p id=\"error-message\">{signupError.username}</p>}\n                </div>\n                <div>\n                    <label>First Name</label>  \n                    <input type=\"text\" name=\"first_name\" onChange={changeHandler} value={userData.first_name} />  \n                </div>\n                <div>\n                    <label>Last Name</label>  \n                    <input type=\"text\" name=\"last_name\" onChange={changeHandler} value={userData.last_name} />  \n                </div>\n                <div>\n                    <label>Email</label>  \n                    <input type=\"email\" name=\"email\" onChange={changeHandler} value={userData.email} />  \n                </div>\n                <div>\n                    <label>Password</label>  \n                    <input type=\"password\" name=\"password\" onChange={changeHandler} value={userData.password} />  \n                    {('password' in signupError) && <p id=\"error-message\">{signupError.password}</p>}\n                </div>\n                <div>\n                    <label>Confirm Password</label>  \n                    <input type=\"password\" name=\"re_password\" onChange={changeHandler} value={userData.re_password} />  \n                    {('re_password' in signupError) && <p id=\"error-message\">{signupError.re_password}</p>}\n                </div>\n                <button type=\"submit\">Sign up</button>   \n            </form>\n        </div>\n    )\n}"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAEhC,MAAO,CAAAC,MAAM,KAAM,WAAW,CAC9B,MAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzB,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAI,CAC9B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,CACrC,UAAU,CAAE,EAAE,CACd,YAAY,CAAE,EAAE,CAChB,WAAW,CAAE,EAAE,CACf,OAAO,CAAE,EAAE,CACX,UAAU,CAAE,EAAE,CACd,aAAa,CAAE,EACnB,CAAC,CAAC,CAEF,KAAM,CAAAS,aAAa,CAAGA,CAAA,GAAM,CACxBD,WAAW,CAAC,CACR,UAAU,CAAE,EAAE,CACd,YAAY,CAAE,EAAE,CAChB,WAAW,CAAE,EAAE,CACf,OAAO,CAAE,EAAE,CACX,UAAU,CAAE,EAAE,CACd,aAAa,CAAE,EACnB,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CAElD,KAAM,CAAAY,aAAa,CAAIC,KAAK,EAAK,CAC7BL,WAAW,CAAC,CACR,GAAGD,QAAQ,CACX,CAACM,KAAK,CAACC,MAAM,CAACC,IAAI,EAAGF,KAAK,CAACC,MAAM,CAACE,KACtC,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAJ,KAAK,EAAK,CACnCA,KAAK,CAACK,cAAc,CAAC,CAAC,CAEtBC,KAAK,CACDlB,MAAM,CAACmB,OAAO,CAAG,aAAa,CAC9B,CACIC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAClB,QAAQ,CACjC,CAAC,CAAC,CACLmB,IAAI,CAACC,QAAQ,EAAI,CACd,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,CACd,MAAO,CAAAD,QAAQ,CAACE,IAAI,CAAC,CAAC,CACrBH,IAAI,CAACI,IAAI,EAAI,CAAC,KAAM,IAAI,CAAAC,KAAK,CAACP,IAAI,CAACC,SAAS,CAACK,IAAI,CAAC,CAAC,EAAC,CAAC,CAC1D,CAAC,IAAM,CACHE,KAAK,CAAC,oCAAoC,CAAC,CAC3CvB,aAAa,CAAC,CAAC,CACnB,CACA,MAAO,CAAAkB,QAAQ,CAACE,IAAI,CAAC,CAAC,CAC1B,CAAC,CAAC,CACDH,IAAI,CAACI,IAAI,EAAI,CACVG,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC,CACrB,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,EAAI,CACZzB,cAAc,CAACa,IAAI,CAACa,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC,CAAC,CACzC,GAAI5B,WAAW,CAAC6B,QAAQ,CAAE,CACtBP,KAAK,CAAC,YAAY,CAAGtB,WAAW,CAAC6B,QAAQ,CAAC,CAC9C,CACAN,OAAO,CAACC,GAAG,CAACxB,WAAW,CAAC,CAC5B,CAAC,CAAC,CACN,CAAC,CAED,mBACIP,IAAA,QAAAqC,QAAA,cACInC,KAAA,SAAMoC,QAAQ,CAAExB,aAAc,CAAAuB,QAAA,eAC1BnC,KAAA,QAAAmC,QAAA,EACM,kBAAkB,EAAI,CAAA9B,WAAW,eAAKP,IAAA,MAAGuC,EAAE,CAAC,eAAe,CAAAF,QAAA,CAAE9B,WAAW,CAACiC,gBAAgB,CAAI,CAAC,cAChGxC,IAAA,UAAAqC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBrC,IAAA,UAAOyC,IAAI,CAAC,MAAM,CAAC7B,IAAI,CAAC,UAAU,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAACgC,QAAS,CAAE,CAAC,CACtF,UAAU,EAAI,CAAA7B,WAAW,eAAKP,IAAA,MAAGuC,EAAE,CAAC,eAAe,CAAAF,QAAA,CAAE9B,WAAW,CAAC6B,QAAQ,CAAI,CAAC,EAC/E,CAAC,cACNlC,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UAAAqC,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBrC,IAAA,UAAOyC,IAAI,CAAC,MAAM,CAAC7B,IAAI,CAAC,YAAY,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAACuC,UAAW,CAAE,CAAC,EAC3F,CAAC,cACNzC,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UAAAqC,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBrC,IAAA,UAAOyC,IAAI,CAAC,MAAM,CAAC7B,IAAI,CAAC,WAAW,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAACwC,SAAU,CAAE,CAAC,EACzF,CAAC,cACN1C,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UAAAqC,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBrC,IAAA,UAAOyC,IAAI,CAAC,OAAO,CAAC7B,IAAI,CAAC,OAAO,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAACyC,KAAM,CAAE,CAAC,EAClF,CAAC,cACN3C,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UAAAqC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBrC,IAAA,UAAOyC,IAAI,CAAC,UAAU,CAAC7B,IAAI,CAAC,UAAU,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAAC0C,QAAS,CAAE,CAAC,CAC1F,UAAU,EAAI,CAAAvC,WAAW,eAAKP,IAAA,MAAGuC,EAAE,CAAC,eAAe,CAAAF,QAAA,CAAE9B,WAAW,CAACuC,QAAQ,CAAI,CAAC,EAC/E,CAAC,cACN5C,KAAA,QAAAmC,QAAA,eACIrC,IAAA,UAAAqC,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BrC,IAAA,UAAOyC,IAAI,CAAC,UAAU,CAAC7B,IAAI,CAAC,aAAa,CAAC8B,QAAQ,CAAEjC,aAAc,CAACI,KAAK,CAAET,QAAQ,CAAC2C,WAAY,CAAE,CAAC,CAChG,aAAa,EAAI,CAAAxC,WAAW,eAAKP,IAAA,MAAGuC,EAAE,CAAC,eAAe,CAAAF,QAAA,CAAE9B,WAAW,CAACwC,WAAW,CAAI,CAAC,EACrF,CAAC,cACN/C,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,SAAO,CAAQ,CAAC,EACpC,CAAC,CACN,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}