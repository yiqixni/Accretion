{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Config from\"../Config\";import'./UploadForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SellerUpload(){const[propertyData,setPropertyData]=useState({\"address\":\"\",\"description\":\"\",\"asking_price\":\"\",\"shares\":\"\"});const[images,setImages]=useState([]);const submitHandler=async event=>{event.preventDefault();const jwt=JSON.parse(localStorage.getItem('jwt'));const formData=new FormData();formData.append('address',propertyData.address);formData.append('description',propertyData.description);formData.append('asking_price',propertyData.asking_price);formData.append('shares',propertyData.shares);images.forEach((image,index)=>{formData.append(\"uploaded_images\",image);});console.log(\"formData:\",formData);const response=await fetch(Config.API_URL+\"api/sell/\",{method:'POST',headers:{// omitting the content-type let browser automatically set the boundry for multipart/form-data\n'Accept':'application/json','Authorization':\"JWT \".concat(jwt.access)},body:formData});if(response.ok){const data=await response.json();console.log(data);}};const changeHandler=event=>{setPropertyData({...propertyData,[event.target.name]:event.target.value});};const imageChangeHandler=event=>{setImages([...images,event.target.files[0]]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Upload your property\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",onChange:changeHandler,value:propertyData.address})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",onChange:changeHandler,value:propertyData.description})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Asking price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"asking_price\",onChange:changeHandler,value:propertyData.asking_price})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Shares to sell\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"shares\",onChange:changeHandler,value:propertyData.shares})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Images\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"images\",accept:\"image/*\",onChange:imageChangeHandler,multiple:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Config","jsx","_jsx","jsxs","_jsxs","SellerUpload","propertyData","setPropertyData","images","setImages","submitHandler","event","preventDefault","jwt","JSON","parse","localStorage","getItem","formData","FormData","append","address","description","asking_price","shares","forEach","image","index","console","log","response","fetch","API_URL","method","headers","concat","access","body","ok","data","json","changeHandler","target","name","value","imageChangeHandler","files","className","children","onSubmit","type","onChange","accept","multiple"],"sources":["/Users/yxni-mbp/Dropbox (Personal)/Startup/Accretion/Website/frontend/React_Accretion/accretion/src/sell/SellerUpload.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";  \n\nimport Config from \"../Config\";\nimport './UploadForm.css'\n\nexport default function SellerUpload() {\n    \n    const [propertyData, setPropertyData] = useState({\n        \"address\": \"\",\n        \"description\": \"\", \n        \"asking_price\": \"\", \n        \"shares\": \"\"\n    });\n\n    const [images, setImages] = useState([]); \n    \n    const submitHandler = async (event) => {\n        event.preventDefault();\n        \n        const jwt = JSON.parse(localStorage.getItem('jwt'));\n\n        const formData = new FormData(); \n\n        formData.append('address', propertyData.address);\n        formData.append('description', propertyData.description);\n        formData.append('asking_price', propertyData.asking_price);\n        formData.append('shares', propertyData.shares);\n\n        images.forEach((image, index) => {\n            formData.append(\"uploaded_images\", image);\n        });\n        \n        \n        console.log(\"formData:\", formData);\n\n        const response = await fetch(\n            Config.API_URL + \"api/sell/\", \n            {\n                method: 'POST', \n                headers: {\n                    // omitting the content-type let browser automatically set the boundry for multipart/form-data\n                    'Accept': 'application/json', \n                    'Authorization': `JWT ${jwt.access}`\n                },  \n                body: formData\n            }\n        )\n\n        if (response.ok) {\n            const data = await response.json(); \n            console.log(data);\n        }\n    }\n    \n    const changeHandler = (event) => {\n        setPropertyData({\n            ...propertyData, \n            [event.target.name]: event.target.value\n        });\n    } \n\n    const imageChangeHandler = (event) => { \n        setImages([\n            ...images, \n            event.target.files[0]]); \n    }\n    \n    return (\n        <div className=\"upload-form\">\n            <h3>Upload your property</h3>\n            <form onSubmit={submitHandler}> \n                <div>\n                    <label>Address</label>  \n                    <input type=\"text\" \n                    name=\"address\" \n                    onChange={changeHandler} \n                    value={propertyData.address} />  \n                </div>\n                <div>\n                    <label>Description</label>  \n                    <input type=\"text\" \n                    name=\"description\" \n                    onChange={changeHandler} \n                    value={propertyData.description} />  \n                </div>\n                <div>\n                    <label>Asking price</label>  \n                    <input type=\"text\" \n                    name=\"asking_price\" \n                    onChange={changeHandler} \n                    value={propertyData.asking_price} />    \n                </div>\n                <div>\n                    <label>Shares to sell</label>  \n                    <input type=\"text\" \n                    name=\"shares\" \n                    onChange={changeHandler} \n                    value={propertyData.shares} />    \n                </div>\n                <div>\n                    <label>Images</label>  \n                    <input type=\"file\" \n                    name=\"images\" \n                    accept=\"image/*\" \n                    onChange={imageChangeHandler}\n                    multiple/>    \n                </div>\n\n                <button type=\"submit\">Submit</button>   \n            </form> \n        </div>\n    )\n\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}